- const priorityColors = { low: 'border-l-gray-400', medium: 'border-l-blue-500', high: 'border-l-orange-500', urgent: 'border-l-red-600' }
- const priorityBgColors = { low: 'bg-gray-100 text-gray-700', medium: 'bg-blue-100 text-blue-700', high: 'bg-orange-100 text-orange-700', urgent: 'bg-red-100 text-red-700' }

.ticket-card.block.bg-white.rounded-lg.shadow-sm.border.border-l-4.hover_shadow-xl.hover_-translate-y-2.hover_bg-gray-50.transition-all.duration-200.cursor-move.group(
  draggable="true"
  data-ticket-id=ticket.id
  class=priorityColors[ticket.priority]
)
  .p-4
    //- Header
    .flex.items-start.justify-between.mb-3
      .flex-1
        .flex.items-center.space-x-2.mb-2
          a.text-xs.font-semibold.text-gray-500.hover_text-blue-600(href=`/tickets/${ticket.id}`) ##{ticket.id}
          span.px-2.py-0_5.text-xs.font-semibold.rounded(class=priorityBgColors[ticket.priority])
            = ticket.priority.toUpperCase()

        a.block(href=`/tickets/${ticket.id}`)
          h4.text-sm.font-semibold.text-gray-900.line-clamp-2.group-hover_text-blue-600.transition-colors
            = ticket.title

    //- Description
    if ticket.description
      p.text-xs.text-gray-600.line-clamp-2.mb-3= ticket.description

    //- Meta information
    .space-y-2
      //- Department
      if ticket.department_name
        .flex.items-center.space-x-2.text-xs.text-gray-600
          svg.w-4.h-4.flex-shrink-0(fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4")
          span.truncate= ticket.department_name

      //- Customer (for agents/admins)
      if (isAdmin() || isAgent()) && ticket.customer_name
        .flex.items-center.space-x-2.text-xs.text-gray-600
          svg.w-4.h-4.flex-shrink-0(fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z")
          span.truncate= ticket.customer_name

      //- Assigned Agent
      if isAdmin() || isAgent()
        .flex.items-center.space-x-2.text-xs
          if ticket.assigned_agent_name
            .flex.items-center.space-x-2
              .w-6.h-6.rounded-full.bg-gradient-to-br.from-blue-500.to-blue-600.text-white.flex.items-center.justify-center.text-xs.font-bold
                = ticket.assigned_agent_name.charAt(0).toUpperCase()
              span.text-gray-700.truncate= ticket.assigned_agent_name
          else
            .flex.items-center.space-x-2.text-gray-400
              .w-6.h-6.rounded-full.border-2.border-dashed.border-gray-300.flex.items-center.justify-center
                svg.w-3.h-3(fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z")
              span.italic Unassigned

    //- Footer
    .mt-3.pt-3.border-t.border-gray-100.flex.items-center.justify-between
      .flex.items-center.space-x-2.text-xs.text-gray-500
        svg.w-4.h-4(fill="none" stroke="currentColor" viewBox="0 0 24 24")
          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z")
        span(title=formatDate(ticket.created_at))= timeAgo(ticket.created_at)

      if ticket.reply_count > 0
        .flex.items-center.space-x-1.text-xs.text-gray-600
          svg.w-4.h-4(fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z")
          span.font-semibold= ticket.reply_count
