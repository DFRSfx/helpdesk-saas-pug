doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    meta(name="description" content="Zolentra - Professional Helpdesk Platform")
    title Zolentra - Support Portal
    link(rel="icon" type="image/x-icon" href="/favicon.ico")
    link(rel="stylesheet" href="/css/output.css")
    link(rel="stylesheet" href="/css/style.css")
    style.
      .opacity-100 { opacity: 1; }
      .scale-100 { transform: scale(1); }
      .scale-95 { transform: scale(0.95); }

  body(class="bg-gradient-to-b from-slate-50 to-slate-50 antialiased")
    header(class="fixed w-full bg-white border-b border-slate-200 z-50 shadow-sm")
      nav(class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4")
        div(class="flex justify-between items-center")
          a(class="flex items-center gap-2" href="/")
            img(class="h-10" src="/images/zolentra_logo.webp" alt="Zolentra")
          
          div(class="hidden md:flex items-center space-x-2")
            a(class="px-4 py-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all font-medium text-sm" href="#features") Features
            a(class="px-4 py-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all font-medium text-sm" href="#how-it-works") How It Works
            a(class="px-4 py-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all font-medium text-sm" href="#faq") FAQ
          
          div(class="hidden md:flex items-center gap-3")
            if currentUser
              div(class="relative")
                button#landingUserMenuButton.flex.items-center.space-x-3.px-3.py-2.rounded-lg.hover_bg-gray-100.transition-colors
                  .w-9.h-9.rounded-full.bg-gradient-to-br.from-blue-500.to-blue-600.text-white.flex.items-center.justify-center.font-bold.shadow-md
                    = currentUser.name.charAt(0).toUpperCase()
                  .hidden.md_block.text-left
                    p.text-sm.font-semibold.text-gray-900= currentUser.name.split(' ')[0]
                    p.text-xs.text-gray-500= currentUser.role.charAt(0).toUpperCase() + currentUser.role.slice(1)
                  svg#landingMenuIcon.w-4.h-4.text-gray-500.transition-transform.duration-200(fill="none" stroke="currentColor" viewBox="0 0 24 24")
                    path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7")
                
                #landingUserMenuDropdown.hidden.absolute.right-0.mt-2.w-56.bg-white.rounded-xl.shadow-2xl.border.border-gray-200.z-50.overflow-hidden
                  .p-4.border-b.border-gray-100.bg-gradient-to-r.from-gray-50.to-white
                    p.text-sm.font-semibold.text-gray-900= currentUser.name
                    p.text-xs.text-gray-500= currentUser.email
                  .py-2
                    a.flex.items-center.px-4.py-2.text-sm.rounded-lg.relative.overflow-hidden(href="/dashboard" style="background-color: transparent; color: #374151; transition: all 300ms ease;" onmouseover="const bg = this.querySelector('div'); bg.style.opacity='1'; this.style.color='#2563eb';" onmouseout="const bg = this.querySelector('div'); bg.style.opacity='0'; this.style.color='#374151';")
                      div.absolute.inset-0(style="background: linear-gradient(to right, rgba(59,130,246,0), rgba(59,130,246,0.1), rgba(59,130,246,0)); opacity: 0; transition: opacity 300ms;")
                      svg.w-4.h-4.mr-3(fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: inherit; transition: color 300ms;")
                        path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6")
                      span.relative(style="z-index: 10;") Dashboard
                    if currentUser.role === 'customer'
                      a.flex.items-center.px-4.py-2.text-sm.rounded-lg.relative.overflow-hidden(href="/tickets/portal" style="background-color: transparent; color: #374151; transition: all 300ms ease;" onmouseover="const bg = this.querySelector('div'); bg.style.opacity='1'; this.style.color='#2563eb';" onmouseout="const bg = this.querySelector('div'); bg.style.opacity='0'; this.style.color='#374151';")
                        div.absolute.inset-0(style="background: linear-gradient(to right, rgba(59,130,246,0), rgba(59,130,246,0.1), rgba(59,130,246,0)); opacity: 0; transition: opacity 300ms;")
                        svg.w-4.h-4.mr-3(fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: inherit; transition: color 300ms;")
                          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2")
                        span.relative(style="z-index: 10;") My Tickets
                  .border-t.border-gray-100
                    a.flex.items-center.px-4.py-3.text-sm.rounded-lg.relative.overflow-hidden(href="/auth/logout" style="background-color: transparent; color: #dc2626; transition: all 300ms ease;" onmouseover="const bg = this.querySelector('div'); bg.style.opacity='1'; this.style.color='#991b1b';" onmouseout="const bg = this.querySelector('div'); bg.style.opacity='0'; this.style.color='#dc2626';")
                      div.absolute.inset-0(style="background: linear-gradient(to right, rgba(220,38,38,0), rgba(220,38,38,0.1), rgba(220,38,38,0)); opacity: 0; transition: opacity 300ms;")
                      svg.w-4.h-4.mr-3(fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: inherit; transition: color 300ms;")
                        path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1")
                      span.relative(style="z-index: 10;") Sign Out
            else
              button(class="px-6 py-2.5 text-blue-600 bg-white border-2 border-blue-600 rounded-lg hover:bg-blue-50 font-medium" onclick="openLoginModal()")
                span Sign In
              button(class="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium" onclick="openRegisterModal()")
                span Get Started

    main(style="padding-top: 6rem; padding-bottom: 4rem;")
      div(class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8")
        section(class="text-center mb-32 pt-16")
          div(class="inline-flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-semibold mb-6")
            svg(class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20")
              path(d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z")
            | Professional Support Platform

          h1(class="text-5xl md:text-6xl font-bold text-slate-900 mb-6 leading-tight")
            | Get Support,
            br
            span(style="background: linear-gradient(to right, #2563eb, #4f46e5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;") Fast & Easy

          p(class="text-xl text-slate-600 mb-8 max-w-2xl mx-auto")
            | Submit support tickets, track your issues in real-time, and get resolutions from our expert team. We're here to help you succeed.

          div(class="flex flex-col sm:flex-row gap-4 justify-center")
            if currentUser
              a(class="px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold flex items-center justify-center gap-2" href="/tickets/create")
                svg(class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4")
                | Create Support Ticket
              a(class="px-8 py-4 border-2 border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-all font-semibold text-center" href="/tickets")
                | View My Tickets
            else
              button(class="px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-semibold flex items-center justify-center gap-2 mx-auto" onclick="openTicketModal()")
                svg(class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4")
                | Create Your First Ticket

        //- Features Section
        section#features(class="py-20")
          div(class="text-center mb-16")
            h2(class="text-4xl font-bold text-slate-900 mb-4") Why Choose Zolentra?
            p(class="text-xl text-slate-600") Everything you need for professional customer support

          div(class="grid grid-cols-1 md:grid-cols-3 gap-8")
            div(class="p-8 bg-white rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              svg(class="w-12 h-12 text-blue-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z")
              h3(class="text-xl font-bold text-slate-900 mb-2") Lightning Fast
              p(class="text-slate-600") Get instant notifications and real-time updates on your tickets

            div(class="p-8 bg-white rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              svg(class="w-12 h-12 text-blue-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z")
              h3(class="text-xl font-bold text-slate-900 mb-2") Easy to Use
              p(class="text-slate-600") Intuitive interface that requires no training or technical knowledge

            div(class="p-8 bg-white rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              svg(class="w-12 h-12 text-blue-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z")
              h3(class="text-xl font-bold text-slate-900 mb-2") Secure
              p(class="text-slate-600") Enterprise-grade security to protect your customer data

        //- How It Works Section
        section#how-it-works(class="py-20")
          div(class="text-center mb-16")
            h2(class="text-4xl font-bold text-slate-900 mb-4") How It Works
            p(class="text-xl text-slate-600") Simple steps to get started

          div(class="grid grid-cols-1 md:grid-cols-4 gap-8")
            div(class="text-center")
              div(class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4")
                span(class="text-2xl font-bold text-blue-600") 1
              h3(class="text-lg font-bold text-slate-900 mb-2") Create Ticket
              p(class="text-slate-600") Submit a support request with details about your issue

            div(class="text-center")
              div(class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4")
                span(class="text-2xl font-bold text-blue-600") 2
              h3(class="text-lg font-bold text-slate-900 mb-2") Get Assigned
              p(class="text-slate-600") Your ticket is assigned to the right support specialist

            div(class="text-center")
              div(class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4")
                span(class="text-2xl font-bold text-blue-600") 3
              h3(class="text-lg font-bold text-slate-900 mb-2") Stay Updated
              p(class="text-slate-600") Receive real-time updates on your ticket progress

            div(class="text-center")
              div(class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4")
                span(class="text-2xl font-bold text-blue-600") 4
              h3(class="text-lg font-bold text-slate-900 mb-2") Resolution
              p(class="text-slate-600") Your issue gets resolved quickly and efficiently

        //- CTA Section
        section(class="py-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl text-center text-white")
          h2(class="text-4xl font-bold mb-4") Ready to Get Support?
          p(class="text-xl mb-8 max-w-2xl mx-auto") Create your first ticket now and experience the difference

          if currentUser
            a(class="px-8 py-4 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-all inline-block" href="/tickets/create") Create Support Ticket
          else
            button(class="px-8 py-4 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-all" onclick="openRegisterModal()") Get Started

        //- FAQ Section
        section#faq(class="py-20")
          div(class="text-center mb-16")
            h2(class="text-4xl font-bold text-slate-900 mb-4") Frequently Asked Questions
            p(class="text-xl text-slate-600") Find answers to common questions about Zolentra

          div(class="grid grid-cols-1 md:grid-cols-2 gap-8")
            //- FAQ Item 1
            div(class="bg-white p-6 rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              h3(class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2")
                svg(class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
              p(class="text-slate-600") How do I create a support ticket?
              p(class="text-slate-500 text-sm mt-2") You can create a ticket by clicking the "Create Ticket" button on our landing page or from your dashboard. Fill in the required information and submit.

            //- FAQ Item 2
            div(class="bg-white p-6 rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              h3(class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2")
                svg(class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z")
              p(class="text-slate-600") How long does it take to get a response?
              p(class="text-slate-500 text-sm mt-2") Response times vary based on priority and our support capacity. Urgent tickets typically receive a response within 2 hours.

            //- FAQ Item 3
            div(class="bg-white p-6 rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              h3(class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2")
                svg(class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z")
              p(class="text-slate-600") Can I attach files to my ticket?
              p(class="text-slate-500 text-sm mt-2") Yes! You can attach files like screenshots, documents, and logs to your ticket. Maximum file size is 10MB per file.

            //- FAQ Item 4
            div(class="bg-white p-6 rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              h3(class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2")
                svg(class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z")
              p(class="text-slate-600") Can I track my ticket status?
              p(class="text-slate-500 text-sm mt-2") Absolutely! You can track your ticket in real-time from your dashboard and receive updates as your issue progresses.

            //- FAQ Item 5
            div(class="bg-white p-6 rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              h3(class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2")
                svg(class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z")
              p(class="text-slate-600") What if my issue is urgent?
              p(class="text-slate-500 text-sm mt-2") You can mark your ticket as urgent or critical when creating it. Our team will prioritize urgent tickets accordingly.

            //- FAQ Item 6
            div(class="bg-white p-6 rounded-2xl border border-gray-200 hover:shadow-lg transition-shadow")
              h3(class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2")
                svg(class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4")
              p(class="text-slate-600") Is my data secure?
              p(class="text-slate-500 text-sm mt-2") Yes! We use enterprise-grade security and encryption to protect your data. All communications are secure and confidential.

    div#authModal(class="fixed inset-0 bg-black z-50 hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300" style="background-color: rgba(0,0,0,0.5);")
      div(class="bg-white rounded-2xl shadow-2xl max-w-md w-full relative overflow-hidden transform scale-95 transition-transform duration-300" onclick="event.stopPropagation()")
        //- Header with close button
        div(class="bg-white px-8 py-1 flex items-center justify-end border-b border-gray-200")
          button(class="p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-gray-100 transition-all duration-200" onclick="closeAuthModal()" type="button" title="Close")
            svg(class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12")

        div(class="bg-white relative flex")
          div#tabIndicator(class="absolute bottom-0 h-1 transition-all duration-300" style="width: 50%; left: 0%; background: linear-gradient(to right, #2563eb, #4f46e5); box-shadow: 0 2px 8px rgba(37,99,235,0.3);")
          
          button#loginTabBtn(class="flex-1 flex items-center justify-center gap-2 px-4 py-4 text-blue-600 font-semibold transition-colors")
            span Sign In
          
          div(class="w-px bg-gray-300")
          
          button#registerTabBtn(class="flex-1 flex items-center justify-center gap-2 px-4 py-4 text-gray-500 font-semibold transition-colors")
            span Sign Up

        div#loginTab(class="p-8")
          h2(class="text-2xl font-bold text-slate-900 mb-2") Welcome Back
          p(class="text-slate-600 mb-6") Sign in to continue
          
          form#loginForm(class="space-y-4")
            div
              label(class="block text-sm font-semibold text-slate-800 mb-2") Email
              input#loginEmail(type="email" placeholder="your@email.com" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500")
            
            div
              label(class="block text-sm font-semibold text-slate-800 mb-2") Password
              input#loginPassword(type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500")
            
            div#loginErrors
            
            button(type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-all") Sign In

        div#registerTab(class="p-8 hidden")
          h2(class="text-2xl font-bold text-slate-900 mb-2") Create Account
          p(class="text-slate-600 mb-6") Join us to create tickets
          
          form#registerForm(class="space-y-4")
            div
              label(class="block text-sm font-semibold text-slate-800 mb-2") Full Name
              input#registerName(type="text" placeholder="John Doe" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500")
            
            div
              label(class="block text-sm font-semibold text-slate-800 mb-2") Email
              input#registerEmail(type="email" placeholder="your@email.com" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500")
            
            div
              label(class="block text-sm font-semibold text-slate-800 mb-2") Password
              input#registerPassword(type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500")
            
            div#registerErrors
            
            button(type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-all") Create Account

    div#ticketModal(class="fixed inset-0 bg-black z-50 hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300" style="background-color: rgba(0,0,0,0.5); align-items: center; min-height: 100vh;")
      div(class="bg-white shadow-2xl max-w-6xl w-full rounded-3xl overflow-hidden flex flex-col transform scale-95 transition-transform duration-300" style="max-height: 90vh;")
        div(class="bg-white border-b border-gray-200 px-8 py-6 flex items-center justify-between")
          h2(class="text-2xl font-bold text-slate-900") Create Support Ticket
          button(class="p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-gray-100 transition-all duration-200" onclick="closeTicketModal()" type="button" title="Close")
            svg(class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12")

        div(class="p-8 overflow-y-auto flex-1")
          div#ticketNotification(class="hidden mb-4 p-4 rounded-lg border")

          form#ticketForm(class="space-y-6")
            div(class="grid grid-cols-1 md:grid-cols-2 gap-6")
              div
                label(class="block text-sm font-semibold text-slate-800 mb-2 flex items-center gap-2")
                  svg(class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                    path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z")
                  | Full Name
                input#ticketName(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" type="text" placeholder="Your full name" required)

              div
                label(class="block text-sm font-semibold text-slate-800 mb-2 flex items-center gap-2")
                  svg(class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                    path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z")
                  | Email
                input#ticketEmail(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" type="email" placeholder="your@email.com" required)

            div
              label(class="block text-sm font-semibold text-slate-800 mb-2 flex items-center gap-2")
                svg(class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z")
                | Department
              select#ticketDepartment(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" required)
                option(value="") Select a department...
                option(value="1") ðŸ”§ Technical Support
                option(value="2") ðŸ’³ Billing & Payments
                option(value="3") ðŸ’¼ Sales & Pre-Sales
                option(value="4") â“ General Inquiries

            div
              label(class="block text-sm font-semibold text-slate-800 mb-2 flex items-center gap-2")
                svg(class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V5a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2h-3l-4 4z")
                | Subject
              input#ticketSubject(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" type="text" placeholder="e.g., Cannot login to my account" required)

            div
              label(class="block text-sm font-semibold text-slate-800 mb-2 flex items-center gap-2")
                svg(class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z")
                | Describe Your Issue
              textarea#ticketMessage(class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none" placeholder="Please provide detailed information: What are you trying to do? What error or issue are you experiencing?" rows="4" required)
              p(class="text-xs text-gray-500 mt-2") Be as specific as possible. Include error messages, steps to reproduce, or screenshots.

            div
              label(class="block text-sm font-semibold text-slate-800 mb-2 flex items-center gap-2")
                svg(class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4")
                | Attachments (Optional)

              div#dropZone(class="relative border-2 border-dashed border-gray-300 rounded-lg p-6 text-center bg-gray-50 transition-all duration-200" style="cursor: pointer;")
                svg(class="mx-auto h-12 w-12 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12")

                p(class="text-sm text-gray-600 mb-1") Drag and drop files here or click to browse
                p(class="text-xs text-gray-500") Supported: Images, PDFs, Word documents (max 10MB per file)

                input#ticketAttachments(class="hidden" type="file" multiple accept="image/*,.pdf,.doc,.docx,.txt")

              div#attachmentsList(class="mt-4 space-y-2")

              input#attachmentsInput(type="hidden" name="attachments" value="")

            div#ticketFormFooter(class="flex items-center justify-end gap-3 px-8 py-6 border-t border-gray-200 bg-gray-50")
              button(class="px-6 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors font-medium" type="button" onclick="closeTicketModal()")
                span Cancel
              button#submitTicketBtn(class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium" type="submit")
                span Create Ticket

    script.
      // Wait for DOM to be ready before attaching event listeners
      function initializeTicketForm() {
        const ticketForm = document.getElementById('ticketForm');
        if (!ticketForm) {
          console.warn('Ticket form not found');
          return;
        }

        ticketForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          console.log('Ticket form submitted');

          const name = document.getElementById('ticketName').value.trim();
          const email = document.getElementById('ticketEmail').value.trim();
          const subject = document.getElementById('ticketSubject').value.trim();
          const message = document.getElementById('ticketMessage').value.trim();
          const department_id = document.getElementById('ticketDepartment').value;

          // Validation
          if (!name || !email || !subject || !message || !department_id) {
            showTicketNotification('error', 'Missing Fields', 'Please fill in all required fields before submitting.');
            console.log('Validation failed:', { name, email, subject, message, department_id });
            return;
          }

          const submitBtn = document.getElementById('submitTicketBtn');
          submitBtn.disabled = true;
          submitBtn.textContent = 'Creating...';

          try {
            const formData = new FormData();
            formData.append('name', name);
            formData.append('email', email);
            formData.append('subject', subject);
            formData.append('message', message);
            formData.append('department_id', department_id);

            uploadedFiles.forEach((file) => {
              formData.append('attachments', file);
            });

            console.log('Sending ticket creation request...');
            const response = await fetch('/api/tickets/public/create', {
              method: 'POST',
              body: formData
            });

            console.log('Response received:', response.status);
            const data = await response.json();
            console.log('Response data:', data);

            if (data.success) {
              showTicketNotification('success', 'Ticket created successfully!', 'Your support ticket has been created. Check your email for confirmation and visit your portal to track the status.');
              document.getElementById('ticketForm').style.display = 'none';
              document.getElementById('ticketFormFooter').style.display = 'none';
            } else {
              showTicketNotification('error', 'Failed to create ticket', data.message || 'An error occurred. Please try again.');
              submitBtn.disabled = false;
              submitBtn.textContent = 'Create Ticket';
            }
          } catch (error) {
            console.error('Error:', error);
            showTicketNotification('error', 'Network Error', 'An error occurred while creating your ticket. Please check your connection and try again.');
            submitBtn.disabled = false;
            submitBtn.textContent = 'Create Ticket';
          }
        });
      }

      // Initialize when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          initializeTicketForm();
          initializeFileUpload();
        });
      } else {
        initializeTicketForm();
        initializeFileUpload();
      }

      function openLoginModal() {
        const modal = document.getElementById('authModal');
        const modalContent = modal.querySelector('div[class*="bg-white"]');
        modal.classList.remove('hidden');
        
        requestAnimationFrame(() => {
          modal.classList.add('opacity-100');
          modalContent.classList.remove('scale-95');
          modalContent.classList.add('scale-100');
        });
        
        switchAuthTab('login');
      }

      function openRegisterModal() {
        const modal = document.getElementById('authModal');
        const modalContent = modal.querySelector('div[class*="bg-white"]');
        modal.classList.remove('hidden');
        
        requestAnimationFrame(() => {
          modal.classList.add('opacity-100');
          modalContent.classList.remove('scale-95');
          modalContent.classList.add('scale-100');
        });
        
        switchAuthTab('register');
      }

      function closeAuthModal() {
        const modal = document.getElementById('authModal');
        const modalContent = modal.querySelector('div[class*="bg-white"]');
        
        modal.classList.remove('opacity-100');
        modalContent.classList.add('scale-95');
        modalContent.classList.remove('scale-100');
        
        setTimeout(() => {
          modal.classList.add('hidden');
        }, 300);
      }

      function switchAuthTab(tab) {
        const loginTab = document.getElementById('loginTab');
        const registerTab = document.getElementById('registerTab');
        const loginTabBtn = document.getElementById('loginTabBtn');
        const registerTabBtn = document.getElementById('registerTabBtn');
        const tabIndicator = document.getElementById('tabIndicator');

        if (tab === 'login') {
          loginTab.classList.remove('hidden');
          registerTab.classList.add('hidden');
          tabIndicator.style.left = '0%';
          loginTabBtn.classList.remove('text-gray-500');
          loginTabBtn.classList.add('text-blue-600');
          registerTabBtn.classList.remove('text-blue-600');
          registerTabBtn.classList.add('text-gray-500');
        } else {
          loginTab.classList.add('hidden');
          registerTab.classList.remove('hidden');
          tabIndicator.style.left = '50%';
          registerTabBtn.classList.remove('text-gray-500');
          registerTabBtn.classList.add('text-blue-600');
          loginTabBtn.classList.remove('text-blue-600');
          loginTabBtn.classList.add('text-gray-500');
        }
      }

      function openTicketModal() {
        const modal = document.getElementById('ticketModal');
        const modalContent = modal.querySelector('div[style*="max-height"]');
        modal.classList.remove('hidden');
        document.getElementById('ticketForm').classList.remove('hidden');
        
        requestAnimationFrame(() => {
          modal.classList.add('opacity-100');
          modalContent.classList.remove('scale-95');
          modalContent.classList.add('scale-100');
        });
      }

      function closeTicketModal() {
        const modal = document.getElementById('ticketModal');
        const modalContent = modal.querySelector('div[style*="max-height"]');

        modal.classList.remove('opacity-100');
        modalContent.classList.add('scale-95');
        modalContent.classList.remove('scale-100');

        setTimeout(() => {
          modal.classList.add('hidden');

          // Reset form display for next opening
          document.getElementById('ticketForm').style.display = '';
          document.getElementById('ticketFormFooter').style.display = '';
          document.getElementById('ticketNotification').classList.add('hidden');
          document.getElementById('ticketForm').reset();
          uploadedFiles = [];
          displayFileList();
          updateAttachmentsInput();
          const submitBtn = document.getElementById('submitTicketBtn');
          submitBtn.disabled = false;
          submitBtn.textContent = 'Create Ticket';
        }, 300);
      }

      function showTicketNotification(type, title, message) {
        const notification = document.getElementById('ticketNotification');

        let bgColor, borderColor, titleColor, icon, bgIconColor;

        if (type === 'success') {
          bgColor = 'bg-green-50';
          borderColor = 'border-green-200';
          titleColor = 'text-green-900';
          bgIconColor = '#10b981';
          icon = 'âœ“';
        } else {
          bgColor = 'bg-red-50';
          borderColor = 'border-red-200';
          titleColor = 'text-red-900';
          bgIconColor = '#ef4444';
          icon = 'âœ•';
        }

        notification.className = `${bgColor} ${borderColor} border-l-4 p-6 rounded-lg mb-4`;
        notification.innerHTML = `
          <div class="flex gap-4">
            <div class="flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-full" style="background-color: ${bgIconColor}; color: white;">
              <span class="font-bold text-lg">${icon}</span>
            </div>
            <div class="flex-1">
              <h3 class="${titleColor} font-bold text-lg">${title}</h3>
              <p class="${titleColor} text-sm mt-2 opacity-90 leading-relaxed">${message}</p>
            </div>
          </div>
        `;

        notification.classList.remove('hidden');

        // Auto-hide error messages after 5 seconds
        if (type === 'error') {
          setTimeout(() => {
            notification.classList.add('hidden');
          }, 5000);
        }
      }

      let uploadedFiles = [];
      let dropZone, fileInput, attachmentsList, attachmentsInput;

      // Initialize file upload elements when DOM is ready
      function initializeFileUpload() {
        dropZone = document.getElementById('dropZone');
        fileInput = document.getElementById('ticketAttachments');
        attachmentsList = document.getElementById('attachmentsList');
        attachmentsInput = document.getElementById('attachmentsInput');

        if (!dropZone || !fileInput) {
          console.warn('File upload elements not found');
          return;
        }

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          dropZone.addEventListener(eventName, preventDefaults, false);
        });

        dropZone.addEventListener('dragenter', (e) => {
          dragCounter++;
          dropZone.style.borderColor = '#3b82f6';
          dropZone.style.borderWidth = '2px';
          dropZone.style.backgroundColor = '#eff6ff';
          dropZone.style.boxShadow = '0 0 0 3px rgb(191, 219, 254)';
          dropZone.style.transform = 'scale(1.02)';
          dropZone.style.cursor = 'copy';
          document.body.style.cursor = 'copy';
        }, false);

        dropZone.addEventListener('dragover', (e) => {
          dropZone.style.borderColor = '#3b82f6';
          dropZone.style.backgroundColor = '#eff6ff';
          dropZone.style.cursor = 'copy';
          document.body.style.cursor = 'copy';
        }, false);

        dropZone.addEventListener('dragleave', (e) => {
          dragCounter--;
          if (dragCounter === 0) {
            dropZone.style.borderColor = '#d1d5db';
            dropZone.style.backgroundColor = '#f9fafb';
            dropZone.style.boxShadow = 'none';
            dropZone.style.transform = 'scale(1)';
            dropZone.style.cursor = 'pointer';
            document.body.style.cursor = 'auto';
          }
        }, false);

        dropZone.addEventListener('drop', (e) => {
          dragCounter = 0;
          dropZone.style.borderColor = '#d1d5db';
          dropZone.style.backgroundColor = '#f9fafb';
          dropZone.style.boxShadow = 'none';
          dropZone.style.transform = 'scale(1)';
          dropZone.style.cursor = 'pointer';
          document.body.style.cursor = 'auto';
        }, false);

        dropZone.addEventListener('mouseenter', () => {
          dropZone.style.cursor = 'pointer';
          dropZone.style.backgroundColor = '#f3f4f6';
          dropZone.style.borderColor = '#bfdbfe';
        }, false);

        dropZone.addEventListener('mouseleave', () => {
          if (dragCounter === 0) {
            dropZone.style.cursor = 'default';
            dropZone.style.backgroundColor = '#f9fafb';
            dropZone.style.borderColor = '#d1d5db';
          }
        }, false);

        dropZone.addEventListener('drop', (e) => {
          const dt = e.dataTransfer;
          const files = dt.files;
          handleFiles(files);
        }, false);

        dropZone.addEventListener('click', () => {
          fileInput.click();
        });

        fileInput.addEventListener('change', (e) => {
          handleFiles(e.target.files);
        });
      }

      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }

      let dragCounter = 0;

      function handleFiles(files) {
        const maxFileSize = 10 * 1024 * 1024;
        const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'text/plain'];

        for (let file of files) {
          if (file.size > maxFileSize) {
            alert(`File "${file.name}" exceeds 10MB limit.`);
            continue;
          }

          if (!allowedTypes.includes(file.type)) {
            alert(`File type "${file.type}" is not allowed. Please use images, PDFs, or Word documents.`);
            continue;
          }

          if (uploadedFiles.some(f => f.name === file.name && f.size === file.size)) {
            alert(`File "${file.name}" is already added.`);
            continue;
          }

          uploadedFiles.push(file);
        }

        displayFileList();
        updateAttachmentsInput();
      }

      function displayFileList() {
        attachmentsList.innerHTML = '';

        uploadedFiles.forEach((file, index) => {
          const fileSize = (file.size / 1024).toFixed(2);
          const fileExt = file.name.split('.').pop().toUpperCase();

          const fileItem = document.createElement('div');
          fileItem.className = 'flex items-center justify-between bg-gray-50 p-3 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors';
          fileItem.innerHTML = `
            <div class="flex items-center gap-3 flex-1 min-w-0">
              <div class="flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                <span class="text-xs font-bold text-blue-600">${fileExt}</span>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-gray-900 truncate">${file.name}</p>
                <p class="text-xs text-gray-500">${fileSize} KB</p>
              </div>
            </div>
            <button type="button" class="ml-2 flex-shrink-0 text-red-500 hover:text-red-700 transition-colors" onclick="removeFile(${index})">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          `;
          attachmentsList.appendChild(fileItem);
        });
      }

      function removeFile(index) {
        uploadedFiles.splice(index, 1);
        displayFileList();
        updateAttachmentsInput();
        fileInput.value = '';
      }

      function updateAttachmentsInput() {
        attachmentsInput.value = uploadedFiles.length;
      }

      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          closeAuthModal();
          closeTicketModal();
        }
      });

      document.getElementById('authModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeAuthModal();
        }
      });

      document.getElementById('ticketModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeTicketModal();
        }
      });

      const landingUserMenuBtn = document.getElementById('landingUserMenuButton');
      const landingUserMenuDropdown = document.getElementById('landingUserMenuDropdown');
      const landingMenuIcon = document.getElementById('landingMenuIcon');

      if (landingUserMenuBtn && landingUserMenuDropdown) {
        landingUserMenuBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          const isOpen = !landingUserMenuDropdown.classList.contains('hidden');
          
          if (isOpen) {
            landingUserMenuDropdown.classList.add('hidden');
            landingMenuIcon.style.transform = 'rotate(0deg)';
          } else {
            landingUserMenuDropdown.classList.remove('hidden');
            landingMenuIcon.style.transform = 'rotate(180deg)';
          }
        });
        
        document.addEventListener('click', function(e) {
          if (!landingUserMenuBtn.contains(e.target) && !landingUserMenuDropdown.contains(e.target)) {
            landingUserMenuDropdown.classList.add('hidden');
            landingMenuIcon.style.transform = 'rotate(0deg)';
          }
        });
      }

      // Login Form Submission
      document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        const loginErrors = document.getElementById('loginErrors');

        loginErrors.innerHTML = '';

        try {
          const response = await fetch('/auth/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              email,
              password
            })
          });

          const data = await response.json();

          if (data.success) {
            window.location.href = data.redirect || '/dashboard';
          } else {
            loginErrors.innerHTML = `<div class="text-red-500 text-sm bg-red-50 p-3 rounded">${data.message || 'Login failed'}</div>`;
          }
        } catch (error) {
          console.error('Error:', error);
          loginErrors.innerHTML = '<div class="text-red-500 text-sm bg-red-50 p-3 rounded">An error occurred. Please try again.</div>';
        }
      });

      // Register Form Submission
      document.getElementById('registerForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const name = document.getElementById('registerName').value;
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        const registerErrors = document.getElementById('registerErrors');

        registerErrors.innerHTML = '';

        try {
          const response = await fetch('/auth/register', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              name,
              email,
              password
            })
          });

          const data = await response.json();

          if (data.success) {
            window.location.href = data.redirect || '/dashboard';
          } else {
            if (data.errors && Array.isArray(data.errors)) {
              registerErrors.innerHTML = '<ul class="text-red-500 text-sm bg-red-50 p-3 rounded space-y-1">' + 
                data.errors.map(err => `<li>â€¢ ${err}</li>`).join('') + 
              '</ul>';
            } else {
              registerErrors.innerHTML = `<div class="text-red-500 text-sm bg-red-50 p-3 rounded">${data.message || 'Registration failed'}</div>`;
            }
          }
        } catch (error) {
          console.error('Error:', error);
          registerErrors.innerHTML = '<div class="text-red-500 text-sm bg-red-50 p-3 rounded">An error occurred. Please try again.</div>';
        }
      });

      document.getElementById('loginTabBtn').addEventListener('click', () => switchAuthTab('login'));
      document.getElementById('registerTabBtn').addEventListener('click', () => switchAuthTab('register'));
