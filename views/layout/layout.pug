doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title || 'Support Desk'
    link(rel="stylesheet" href="/css/output.css")
    script(src="/socket.io/socket.io.js")
    script(src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js")
    script(src="https://cdn.jsdelivr.net/npm/marked@11.1.0/marked.min.js")
  body.bg-gradient-to-br.from-gray-50.to-gray-100.min-h-screen
    if currentUser
      .flex.h-screen.overflow-hidden
        //- Sidebar
        include ../partials/sidebar

        //- Main content
        .flex-1.flex.flex-col.overflow-hidden
          //- Navbar
          include ../partials/navbar

          //- Flash messages
          include ../partials/flash_messages

          //- Page content
          main.flex-1.overflow-y-auto.p-6
            block content
    else
      //- Auth pages (no sidebar/navbar)
      include ../partials/flash_messages
      block content

    //- Main JavaScript
    script(src="/js/main.js")
    block scripts
